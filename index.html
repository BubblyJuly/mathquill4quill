<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>mathquill4quill Demo</title>

    <!-- KaTeX dependency -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.6.0/katex.min.css" integrity="sha384-wE+lCONuEo/QSfLb4AfrSk7HjWJtc4Xc1OiB2/aDBzHzjnlBP4SX7vjErTcwlA8C" crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.6.0/katex.min.js" integrity="sha384-tdtuPw3yx/rnUGmnLNWXtfjb9fpmwexsd+lr6HUYnUY4B7JhB5Ty7a1mYd+kto/s" crossorigin="anonymous"></script>

    <!-- Quill dependency -->
    <link href="https://cdn.quilljs.com/1.1.10/quill.snow.css" rel="stylesheet">
    <script src="https://cdn.quilljs.com/1.1.10/quill.js"></script>

    <!-- MathQuill dependency -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mathquill/0.10.1/mathquill.min.css" integrity="sha256-Z0FmvP1JtDmwVaHpsgu75FrC/SInDnlFWL95M65PCr4=" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathquill/0.10.1/mathquill.min.js" integrity="sha256-dxKVPdWCaZTdphHQqQEc0GSDAVZJCxshwn3ZrvHtqgo=" crossorigin="anonymous"></script>

    <!-- mathquill4quill include -->
    <script src="mathquill4quill.js"></script>

    <style>
      .github-ribbon {
        position: absolute;
        top: 0;
        right: 0;
      }

      main {
        width: 400px;
        height: 200px;
        margin: 100px auto;
      }

      label {
        padding-top: 0.5em;
        display: block;
      }
    </style>
  </head>
  <body>
    <a href="https://github.com/c-w/mathquill4quill">
      <img
        width="149"
        height="149"
        src="https://github.blog/wp-content/uploads/2008/12/forkme_right_darkblue_121621.png?resize=149%2C149"
        class="github-ribbon"
        alt="Fork me on GitHub">
    </a>

    <main class="demo-container">
      <div id="editor"></div>

      <label>
        Use custom operator buttons:
        <input
          type="checkbox"
          class="option"
          data-name="operators"
          data-value='[["\\pm","\\pm"],["\\sqrt{x}","\\sqrt"],["\\sqrt[n]{x}","\\nthroot"],["\\frac{x}{y}","\\frac"]]'>
      </label>
    </main>

    <script>
    (function($, Quill) {

      var quillOptions = {
        modules: {
          formula: true,
          toolbar: [["bold", "italic", "underline", "formula"]]
        },
        placeholder: "Type text here, or click on the formula button to enter math.",
        theme: "snow"
      };

      var options = {};

      $("input[type='checkbox'].option").each(function() {
        var $option = $(this);
        var name = $option.attr("data-name");
        var isOptionEnabled = window.location.href.indexOf("&" + name + "=true") !== -1;

        if (isOptionEnabled) {
          $option.prop("checked", true);
          options[name] = JSON.parse($option.attr("data-value"));
        }

        $option.change(function(event) {
          var url = window.location.href;
          var checked = event.target.checked;

          if (url.indexOf("?") === -1) {
            url += "?";
          }

          url = url.replace("&" + name + "=" + !checked, "");
          url += "&" + name + "=" + checked;

          window.location.href = url;
        });
      });

      var enableMathQuillFormulaAuthoring = window.mathquill4quill();
      var quill = new Quill("#editor", quillOptions);
      enableMathQuillFormulaAuthoring(quill, options);

    })(window.jQuery, window.Quill);
    </script>
  </body>
</html>
